(this["webpackJsonpspigot-blockly"]=this["webpackJsonpspigot-blockly"]||[]).push([[0],{330:function(e,t,n){},331:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(12),r=n.n(i),o=n(23),l=n.n(o);l.a.defineBlocksWithJsonArray([{type:"test",lastDummyAlign0:"RIGHT",message0:"a %1 b",args0:[{type:"input_value",name:"NAME",check:"Player"}],colour:230,tooltip:"",helpUrl:""},{type:"event_player",message0:"\u53c2\u52a0\u3057\u305f\u30d7\u30ec\u30a4\u30e4\u30fc",output:"Player",colour:100,tooltip:"",helpUrl:""},{type:"sendmessage",message0:"%1 \u306b \u30e1\u30c3\u30bb\u30fc\u30b8 %2 \u3092\u9001\u308b",args0:[{type:"input_value",name:"player",check:"Player"},{type:"input_value",name:"text",check:"String"}],previousStatement:null,nextStatement:null,colour:230,tooltip:"",helpUrl:""}]),l.a.defineBlocksWithJsonArray([{type:"set_gamemode",message0:"%1 \u306e\u30b2\u30fc\u30e0\u30e2\u30fc\u30c9\u3092 %2 \u306b\u5909\u66f4\u3059\u308b",args0:[{type:"input_value",name:"player",check:"Player"},{type:"field_dropdown",name:"gamemode",options:[["\u30af\u30ea\u30a8\u30a4\u30c6\u30a3\u30d6","CREATIVE"],["\u30b5\u30d0\u30a4\u30d0\u30eb","SURVIVAL"]]}],previousStatement:null,nextStatement:null,colour:0,tooltip:"",helpUrl:""},{type:"get_player",message0:"mcid: %1",args0:[{type:"field_input",name:"mcid",text:""}],output:"Player",colour:285,tooltip:"",helpUrl:""}]);var s=n(360),d=n(396),u=n(363),j=n(392),b=n(365),p=n(366),f=n(367),h=n(368),O=n(369),m=n(370),x=n(10),g=n(43),v=Object(g.b)({name:"view",initialState:{tab_value:0,save_open:!1,delete_open:!1,switch_open:!1},reducers:{setTabValue:function(e,t){e.tab_value=t.payload},setSaveOpen:function(e,t){e.save_open=t.payload},setDeleteOpen:function(e,t){e.delete_open=t.payload},setSwitchOpen:function(e,t){e.switch_open=t.payload}}}),y=v.actions,k=y.setTabValue,w=y.setDeleteOpen,_=y.setSaveOpen,C=y.setSwitchOpen,S=v.reducer,N=n(3),T=Object(s.a)((function(e){return Object(d.a)({root:{borderRight:"1px solid ".concat(e.palette.divider),height:"100vh",justifyContent:"space-between",display:"flex",flexDirection:"column",position:"fixed",top:0},tab:{"&:hover":{background:e.palette.action.hover},minWidth:"120px"},socialmedia_icon:{width:"100%",textAlign:"center",padding:"20px 0px","&:hover":{color:e.palette.text.primary}},socailmedias:{marginBottom:"10px"}})}));function F(e){var t=T();return Object(N.jsx)(u.a,{href:e.href,color:"textSecondary",target:"_blank",rel:"noopener",children:Object(N.jsx)("div",{className:t.socialmedia_icon,children:e.icon})})}var D=function(){var e=T(),t=Object(x.c)((function(e){return e.view.tab_value})),n=Object(x.b)();return Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsxs)(j.a,{value:t,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){return n(k(t))},orientation:"vertical",children:[Object(N.jsx)(b.a,{label:"Block",icon:Object(N.jsx)(p.a,{}),className:e.tab}),Object(N.jsx)(b.a,{label:"Code",icon:Object(N.jsx)(f.a,{}),className:e.tab}),Object(N.jsx)(b.a,{label:"File",icon:Object(N.jsx)(h.a,{}),className:e.tab})]}),Object(N.jsxs)("div",{className:e.socailmedias,children:[Object(N.jsx)(F,{href:"https://github.com/Gorayan/spigot-blockly",icon:Object(N.jsx)(O.a,{fontSize:"large"})}),Object(N.jsx)(F,{href:"https://twitter.com/Gorayan_kun",icon:Object(N.jsx)(m.a,{fontSize:"large"})})]})]})},M=n(13),E=n(62),I=n(47),V={selected_file:"",code:"",handle_file:B(),files:[]},W=Object(g.b)({name:"workspace",initialState:V,reducers:{setCode:function(e,t){e.code=t.payload},saveFile:function(e,t){var n=new Date,a=Object(I.a)(Object(I.a)({},e.handle_file),{},{date:n.getFullYear()+"/"+R(n.getMonth()+1)+"/"+R(n.getDate())+" "+R(n.getHours())+":"+R(n.getMinutes()),name:t.payload});e.files=[].concat(Object(E.a)(e.files.filter((function(e){return a.id!==e.id}))),[a]),e.handle_file.name=t.payload},deleteFile:function(e,t){e.files=e.files.filter((function(e){return e.id!==t.payload})),t.payload===e.handle_file.id&&(e.handle_file=B())},selectFile:function(e,t){e.selected_file=t.payload},setHandleFile:function(e,t){e.handle_file=t.payload},setFiles:function(e,t){e.files=t.payload}}});function B(){var e=function(e){var t=1e3;e&&(t=e);return(new Date).getTime().toString(16)+Math.floor(t*Math.random()).toString(16)}(),t=new Date;return{id:e,name:"",date:t.getFullYear()+"/"+R(t.getMonth()+1)+"/"+R(t.getDate())+" "+R(t.getHours())+":"+R(t.getMinutes())}}function R(e){return 1===(e+="").length&&(e="0"+e),e}var A=W.actions,J=A.setCode,P=A.saveFile,G=A.deleteFile,H=A.selectFile,U=A.setHandleFile,L=A.setFiles,X=W.reducer,z=n(84),Y=new o.Generator("spigot-api");Y.get_player=function(e){return['Bukkit.getPlayer("'+e.getFieldValue("mcid")+'")',0]},Y.text=function(e){return['"'+e.getFieldValue("TEXT")+'"',0]},Y.set_gamemode=function(e){var t=e.getFieldValue("gamemode");return Y.valueToCode(e,"player",0)+".setGameMode(GameMode."+t+");"},Y.sendmessage=function(e){return Y.valueToCode(e,"player",0)+".sendMessage("+Y.valueToCode(e,"text",0)+");"},Y.scrub_=function(e,t,n){var a=e.nextConnection&&e.nextConnection.targetBlock(),c="";return a&&(c=n?"":"\n"+Y.blockToCode(a)),t+c};var q=Object(s.a)((function(){return Object(d.a)({blockDiv:{width:"100%",height:"100%"}})}));var K=function(e){var t=q(),n=c.a.createRef(),i=Object(x.c)((function(e){return e.workspace.handle_file})),r=Object(x.b)();return Object(a.useEffect)((function(){if(!e.hidden&&null!==n.current){n.current.innerHTML="";var t=l.a.inject(n.current,{toolbox:z});if(void 0!==i.workspace){var a=l.a.Xml.textToDom(i.workspace);l.a.Xml.domToWorkspace(a,t)}t.addChangeListener((function(){var e=l.a.Xml.workspaceToDom(t),n=l.a.Xml.domToText(e);r(U(Object(I.a)(Object(I.a)({},i),{},{workspace:n})));var a=Y.workspaceToCode(t);r(J(a))}))}}),[i.id,e.hidden]),Object(N.jsx)("div",{ref:n,className:t.blockDiv,hidden:e.hidden})},Q=n(394),Z=n(373),$=n(85),ee=n.n($),te=(n(325),n(4)),ne=n(374),ae=n(86),ce=n.n(ae),ie=Object(s.a)((function(e){return Object(d.a)({content:{margin:"auto",maxWidth:"720px"},buttons:{display:"flex",color:e.palette.text.secondary,marginTop:e.spacing(2),flexDirection:"row-reverse"},code:{borderRadius:"4px"}})}));var re=function(e){var t=ie(),n=Object(x.c)((function(e){return e.workspace.code}));return Object(N.jsxs)("div",{className:t.content,hidden:e.hidden,children:[Object(N.jsx)("div",{className:t.buttons,children:Object(N.jsx)(ce.a,{text:n,children:Object(N.jsx)(Q.a,{title:"Copy",children:Object(N.jsx)(Z.a,{"aria-label":"delete",children:Object(N.jsx)(ne.a,{})})})})}),Object(N.jsx)(ee.a,{className:Object(te.a)("java",t.code),children:n})]})},oe=n(63),le=n(382),se=n(383),de=n(385),ue=n(388),je=n(391),be=n(380),pe=n(378),fe=n(37),he=n(384),Oe=n(386),me=n(387),xe=n(389),ge=n(390),ve=n(395),ye=n(376),ke=n(377),we=n(379);function _e(){var e=Object(x.c)((function(e){return e.workspace.handle_file.name})),t=Object(a.useState)(""),n=Object(oe.a)(t,2),c=n[0],i=n[1];Object(a.useEffect)((function(){i(e)}),[e]);var r=Object(x.c)((function(e){return e.view.save_open})),o=Object(x.b)(),l=function(){o(_(!1))};return Object(N.jsxs)(ve.a,{open:r,onClose:l,"aria-labelledby":"form-dialog-save",fullWidth:!0,children:[Object(N.jsx)(ye.a,{id:"form-dialog-save",children:"\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u4fdd\u5b58"}),Object(N.jsx)(ke.a,{children:Object(N.jsx)(je.a,{error:""===c,defaultValue:e,autoFocus:!0,margin:"dense",id:"name",label:""===c?"Error":"Name",type:"text",fullWidth:!0,onChange:function(e){i(e.target.value)}})}),Object(N.jsxs)(we.a,{children:[Object(N.jsx)(be.a,{onClick:l,color:"primary",children:"Cancel"}),Object(N.jsx)(be.a,{onClick:function(){""!==c&&(l(),o(P(c)))},color:"primary",children:"Save"})]})]})}var Ce=n(381);function Se(){var e=Object(x.c)((function(e){return e.workspace.selected_file})),t=Object(x.c)((function(e){return e.view.delete_open})),n=Object(x.b)(),a=function(){n(w(!1))};return Object(N.jsxs)(ve.a,{open:t,onClose:a,fullWidth:!0,"aria-labelledby":"delete-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(N.jsx)(ye.a,{id:"delete-dialog-title",children:"\u672c\u5f53\u306b\u524a\u9664\u3057\u307e\u3059\u304b\uff1f"}),Object(N.jsx)(ke.a,{children:Object(N.jsx)(Ce.a,{id:"alert-dialog-description",children:"\u524a\u9664\u3059\u308b\u3068\u5143\u306b\u623b\u305b\u307e\u305b\u3093"})}),Object(N.jsxs)(we.a,{children:[Object(N.jsx)(be.a,{onClick:a,color:"primary",children:"Cancel"}),Object(N.jsx)(be.a,{onClick:function(){a(),n(G(e))},color:"secondary",children:"Delete"})]})]})}var Ne=n(35);function Te(){var e=Object(x.c)((function(e){return e.workspace.selected_file})),t=Object(x.c)((function(e){return e.view.switch_open})),n=Object(x.b)(),a=function(){n(C(!1))},c="/"+e;return Object(N.jsxs)(ve.a,{open:t,onClose:a,fullWidth:!0,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[Object(N.jsx)(ye.a,{id:"delete-dialog-title",children:"\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9\u3092\u5909\u66f4"}),Object(N.jsx)(ke.a,{children:Object(N.jsx)(Ce.a,{id:"delete-dialog-description",children:"\u4fdd\u5b58\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u5909\u66f4\u5185\u5bb9\u306f\u7834\u68c4\u3055\u308c\u307e\u3059"})}),Object(N.jsxs)(we.a,{children:[Object(N.jsx)(be.a,{onClick:a,color:"primary",children:"Cancel"}),Object(N.jsx)(be.a,{component:Ne.b,to:c,color:"primary",onClick:a,children:"Switch"})]})]})}var Fe=Object(s.a)((function(e){return Object(d.a)({content:{maxWidth:"720px",margin:"auto"},list:{backgroundColor:e.palette.background.paper,border:"1px solid ".concat(e.palette.divider),borderRadius:e.shape.borderRadius},root:{"& .MuiList-padding":{paddingTop:0,paddingBottom:0}},listitem:{"&:hover":{background:e.palette.action.hover}},toolbar:{display:"flex",justifyContent:"space-between",marginTop:e.spacing(2),marginBottom:e.spacing(2)},button:{margin:e.spacing(1)},buttons:{color:e.palette.success.main},help:{display:"flex",alignItems:"center",color:e.palette.text.secondary,justifyContent:"center",marginTop:e.spacing(4)},moodbadIcon:{marginRight:e.spacing(3)}})}));function De(e){var t=Fe(),n=Object(x.c)((function(e){return e.workspace.handle_file})),c=Object(a.useState)(""),i=Object(oe.a)(c,2),r=i[0],o=i[1],l=Object(E.a)(Object(x.c)((function(e){return e.workspace.files.filter((function(e){return e.name.includes(r)}))})));l.sort((function(e,t){return e.date<t.date?1:e.date>t.date?-1:0}));var s=Object(x.b)(),d=[];return l.forEach((function(e){d.push(Object(N.jsxs)(le.a,{className:t.listitem,children:[Object(N.jsx)(se.a,{children:Object(N.jsx)(he.a,{})}),Object(N.jsx)(de.a,{primary:e.name,secondary:e.date}),Object(N.jsx)(de.a,{secondary:n.id===e.id?"(current)":""}),Object(N.jsx)(Z.a,{"aria-label":"edit",onClick:function(){s(H(e.id)),s(C(!0))},children:Object(N.jsx)(Oe.a,{})}),Object(N.jsx)(Z.a,{"aria-label":"delete",onClick:function(){s(H(e.id)),s(w(!0))},children:Object(N.jsx)(me.a,{})})]},e.id)),d.push(Object(N.jsx)(ue.a,{},e.id+"_divider"))})),d.pop(),Object(N.jsxs)("div",{className:t.root,hidden:e.hidden,children:[Object(N.jsxs)("div",{className:t.content,children:[Object(N.jsxs)("div",{className:t.toolbar,children:[Object(N.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(N.jsx)(je.a,{id:"standard-search",label:"Search",type:"search",onChange:function(e){return o(e.target.value)}})}),Object(N.jsxs)("div",{className:t.buttons,children:[Object(N.jsx)(be.a,{variant:"outlined",color:"inherit",className:t.button,component:Ne.b,to:"/create",onClick:function(){s(U(B())),s(P("new file"))},children:"Create"}),Object(N.jsx)(be.a,{variant:"outlined",endIcon:Object(N.jsx)(xe.a,{}),color:"primary",className:t.button,onClick:function(){return s(_(!0))},children:"Save"})]})]}),Object(N.jsx)(pe.a,{className:t.list,hidden:0===l.length,children:d}),Object(N.jsx)("div",{hidden:0!==l.length,children:Object(N.jsxs)("div",{className:t.help,children:[Object(N.jsx)(ge.a,{className:t.moodbadIcon}),Object(N.jsx)(fe.a,{variant:"h5",children:"No Files"})]})})]}),Object(N.jsx)(_e,{}),Object(N.jsx)(Se,{}),Object(N.jsx)(Te,{})]})}var Me=Object(s.a)((function(e){return Object(d.a)({root:{width:"calc(100vw - 120px)",height:"100vh",marginLeft:"120px",background:e.palette.background.default}})}));function Ee(){var e=Me(),t=Object(x.c)((function(e){return e.view.tab_value}));return Object(N.jsxs)("div",{className:e.root,children:[Object(N.jsx)(K,{hidden:0!==t}),Object(N.jsx)(re,{hidden:1!==t}),Object(N.jsx)(De,{hidden:2!==t})]})}var Ie=Object(s.a)((function(){return Object(d.a)({root:{display:"flex"}})}));var Ve=function(){var e=Object(M.f)().id,t=function(){var e=localStorage.getItem("files"),t=[];return null!==e&&(t=JSON.parse(e)),t}(),n=t.find((function(t){return t.id===e})),c=Object(x.b)(),i=void 0!==t.find((function(t){return t.id===e}));Object(a.useEffect)((function(){c(L(t)),void 0!==n&&c(U(n))}));var r=Ie(),o=Object(N.jsxs)("div",{className:r.root,children:[Object(N.jsx)(D,{}),Object(N.jsx)(Ee,{})]});return i||"create"===e?o:Object(N.jsx)(M.a,{to:"/"})},We=(n(330),function(e){return function(t){return function(n){var a=t(n),c=e.getState();return localStorage.setItem("files",JSON.stringify(c.workspace.files)),a}}}),Be=Object(g.a)({reducer:{view:S,workspace:X},middleware:function(e){return e({serializableCheck:!1}).prepend(We)}});r.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(x.a,{store:Be,children:Object(N.jsxs)(Ne.a,{children:[Object(N.jsx)(M.b,{path:"/:id",component:Ve}),Object(N.jsx)(M.b,{path:"/",children:Object(N.jsx)(M.a,{to:"/create"})})]})})}),document.getElementById("root"))},84:function(e){e.exports=JSON.parse('{"kind":"categoryToolbox","contents":[{"kind":"category","name":"Player","contents":[{"kind":"block","type":"get_player"},{"kind":"block","type":"sendmessage"},{"kind":"block","type":"set_gamemode"}]},{"kind":"category","name":"Other","contents":[{"kind":"block","type":"text"}]}]}')}},[[331,1,2]]]);
//# sourceMappingURL=main.9e32f197.chunk.js.map